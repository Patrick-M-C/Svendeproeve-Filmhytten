@page "/"
@rendermode InteractiveServer

@using Svendeprøve.Components.Models
@using Svendeprøve.Components.Services
@inject MovieService MovieService
@inject NavigationManager NavigationManager

@* 
    Blazor-komponent til visning af vores home page og 5 kørende film i din nærmeste biograf.
    Viser de 5 første film fra listen på forsiden. Den første film (Minecraft Movie) har en dedikeret side,
    mens de øvrige film linker til en generisk detaljeside. Der er også en særskilt knap til Final Destination.
*@

<PageTitle>Home</PageTitle>

<h1 class="text-center mt-4">Velkommen til Filmhytten!</h1>
<p class="text-center">Her kan du se 5 populære film i din nærmeste biograf</p>

@if (movies == null)
{
    <p class="text-center">Loading.....</p>
}
else if (movies.Count < 5)
{
    <p class="text-center text-danger">Ikke nok film tilgængelige. @movies.Count film fundet.</p>
}
else
{
    <div class="container">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            @foreach (var movie in movies.Take(5))
            {
                <div class="col">
                    <div class="card h-100">
                        <img src="@movie.poster_path" class="card-img-top" alt="@movie.Title" style="max-height: 400px; object-fit: cover;" />
                        <div class="card-body">
                            <h5 class="card-title">@movie.Title</h5>
                            @if (movie == movies.First())
                            {
                                <button class="btn btn-primary" @onclick="NavigateToMinecraftMovie">Se Detaljer</button>
                            }
                            else
                            {
                                <button class="btn btn-primary" @onclick="() => NavigateToMovieDetail(movie.Id)">Se Detaljer</button>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
}

@code {
    private List<Movie>? movies;

    protected override async Task OnInitializedAsync()
    {
        movies = await MovieService.GetMoviesAsync();
    }

    private void NavigateToMovieDetail(int movieId)
    {
        NavigationManager.NavigateTo($"/Movie/{movieId}");
    }

    private void NavigateToMinecraftMovie()
    {
        NavigationManager.NavigateTo("/MinecraftMovie");
    }

    private void NavigateToFinalDestination()
    {
        NavigationManager.NavigateTo("/FinalDestination");
    }
}

<style>
    .container {
        padding: 20px;
    }

    .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        transition: box-shadow 0.2s ease;
    }

        .card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

    .card-img-top {
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
    }

    .card-body {
        padding: 15px;
    }

    .card-title {
        font-size: 1.25rem;
        margin-bottom: 10px;
    }

    .card-text {
        font-size: 1rem;
        color: #555;
        margin-bottom: 15px;
    }

    .btn-primary {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #007bff;
        border-color: #007bff;
    }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

    .btn-warning {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #ffc107;
        border-color: #ffc107;
        color: #212529;
    }

        .btn-warning:hover {
            background-color: #e0a800;
            border-color: #d39e00;
        }

    .text-danger {
        color: #dc3545;
    }
</style>
