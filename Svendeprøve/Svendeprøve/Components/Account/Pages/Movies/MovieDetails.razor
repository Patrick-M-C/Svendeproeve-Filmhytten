@page "/movies/{Id:int}"

@using Svendeprøve.Components.Models
@using Svendeprøve.Components.Services

@inject MovieService MovieService

@* 
    Blazor-komponentet til visning af af description om en specifik film.
    Henter og viser filmdata baseret på et ID, der sendes via URL'en.
    Viser en indlæsningsbesked, indtil data er hentet fra MovieService.
*@

<h3>Movie Details</h3>

@if (movie == null)
{
    <p>Loading...</p>
}
else
{
    <div>
        <h2>@movie.Title</h2>
        <p><strong>Release Year:</strong> @movie.release_date</p>
        <p><strong>Description:</strong> @movie.overview</p>
    </div>
}

@code {
    [Parameter] public int Id { get; set; }

    private Movie movie;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            movie = await MovieService.GetMovieByIdAsync(Id);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching movie details: {ex.Message}");
        }
    }
}